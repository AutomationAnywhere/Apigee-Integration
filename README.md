# Overview 

Customers use Apigee integration studio to build integrations to connect
with enterprise applications, databases and event driven systems using
the features provided such as connectors, integration engine and data
transformation tools. In this quick start guide, we show you how you can
use Apigee to create a custom integration to Automation Anywhere A360
Bot. A citizen integrator may start with the integration designer in
Apigee, add tasks to connect to A360 Control room and then authenticate
and deploy a bot on an A360 bot runner of choice.

# Integration Solution Components

The Apigee to A360 integration solution contains the following
components:

  -----------------------------------------------------------------------
  Apigee Integration studio           API triggers, Rest Endpoint tasks,
                                      Data mappers
  ----------------------------------- -----------------------------------
  A360 Bot Editor                     

  -----------------------------------------------------------------------

# System Requirements

  -----------------------------------------------------------------------
  A360 Version            Compatible with Automation Anywhere A360.2X
                          (confirm with Kevin) and above
  ----------------------- -----------------------------------------------
  Apigee Integration      Licensed GCP instance of apigee.google.com
  Studio (Google Cloud    
  Platform)               

  -----------------------------------------------------------------------

# Build the Apigee Integration 

Given that you have already created an RPA task bot in A360, the
following steps will guide you on how to invoke and deploy this bot from
the Apigee platform. The process of setting up an integration on the
Apigee Integrations UI may be divided into two parts -- (a) Build the
integration with components such as REST tasks and Data Mapper tasks.
(b) Invoke this integration via an API trigger task

> An integration developer may follow the below steps to create
> integration in Apigee:\
> **Step 1 :** Log-in to the Apigee [Integrations UI]{.underline}
> landing page on your organization's GCP instance\
> <https://apigee.google.com/landing>\
> \
> **Step 2 :** Navigate to the Integrations UI: Develop \>
> **Integrations** as shown\
> ![Graphical user interface, text, application, chat or text message
> Description automatically
> generated](./media/image1.png | width="1.3817235345581802in"
> height="2.1566568241469817in")\
> \
> **Step 3 :** Click on the button **CREATE NEW** to create a new
> integration and input the following:\
> *Integration name*: \<Provide a name, e.g. Launch Bank Statement
> Processing Bot\>\
> *Description*: \<Provide a description, e.g. Deploys an A360 bot for
> processing files\>\
> *Region*: \<Select a region from the list, e.g. US\>\
> Click on the button **Create**. You will be taken to the Integration
> Editor UI.\
> \
> **Step 4 :** In the Integration Editor, start by adding a Trigger to
> the canvas, by clicking on the palette **+ Add a task/trigger**, and
> then choose the API Trigger.\
> ![Graphical user interface, application, table, Excel Description
> automatically
> generated](./media/image2.png){width="6.043535651793526in"
> height="2.3283114610673667in"}\
> \
> ![Graphical user interface Description automatically generated with
> medium confidence](./media/image3.png){width="6.5in"
> height="2.3833333333333333in"}\
> **\
> Step 5 :** Select the API Trigger task on the canvas and note that the
> Trigger ID is autogenerated based on the integration name. The **API
> trigger** allows integration authors to test an integration via an API
> call. This trigger is useful when you want to test your integration
> from your application code. Now add a Data Mapping task to the canvas
> as shown. The **Data Mapping** task allows integration authors to
> transform and assign data to variables between tasks in an
> integration. Mappings need not be to other variables; it is OK to
> transform a variable and map it back to itself. Variables are created
> using the VAR option in the palette.\
> ![Graphical user interface, application Description automatically
> generated](./media/image4.png){width="5.800115923009624in"
> height="2.7569149168853895in"}\
> \
> ![Graphical user interface, text, application Description
> automatically generated](./media/image5.png){width="6.5in"
> height="2.127083333333333in"}\
> \
> In this example we created-\
> - seven input variables(string datatype) as inputs for the integraion:
> input-ControlRoomUrl, input-Username, input-ApiKey, input-BotId,
> input-RunAsUserId, input-PoolId, input-BotInputVariables\
> - one output variable as the output of the integration:
> output-deploymentId\
> - a few local variables that exist only within the scope of this
> integration: accessToken, authAPIUrl, deployBotAPIUrl,
> authRequestBody, deployRequestBody\
> In addition to these, apigee auto generates a few local variables for
> data parking and transformation purposes.
>
> ![Shape Description automatically
> generated](./media/image6.png){width="0.7118908573928259in"
> height="0.286667760279965in"}\
> ![Graphical user interface, text, application, chat or text message
> Description automatically
> generated](./media/image7.png){width="1.3745330271216099in"
> height="2.143724846894138in"} ![Graphical user interface, text,
> application Description automatically
> generated](./media/image8.png){width="1.6982852143482066in"
> height="0.7141196412948382in"} ![Graphical user interface, text,
> application, chat or text message Description automatically
> generated](./media/image9.png){width="1.5104494750656168in"
> height="1.9303226159230096in"}
>
> After the variables are created, navigate to the data mapping editor
> by clicking on the button shown below. Then map the input and output
> variables as shown.\
> \
> ![Text Description automatically
> generated](./media/image10.png){width="2.3073195538057742in"
> height="0.4601859142607174in"}
>
> ![Graphical user interface, text, application, chat or text message
> Description automatically
> generated](./media/image11.png){width="4.632404855643045in"
> height="2.849225721784777in"}
>
> **Step 6 :** Make the call to A360 control room **authentication
> API**\
> Add a new task **Call Rest Endpoint** to the canvas and configure the
> endpoint URL and http GET method on the right-hand pane. Also update
> the request body with the correct credential. The variables created in
> the previous step can be leveraged for these configurations. This step
> will yield the api token that will be needed in the further steps.\
> \
> ![Graphical user interface, application Description automatically
> generated](./media/image12.png){width="3.7691021434820646in"
> height="4.355003280839895in"}\
> \
> \
> **Step 7 :** Add a Data Mapping task to the canvas to extract the
> token from the previous step.\
> Perform JSON to string operations as shown and save it to a variable.\
> \
> ![Graphical user interface, text, application Description
> automatically
> generated](./media/image13.png){width="5.613016185476815in"
> height="1.3822659667541557in"}\
> **\
> Step 8 :** Make the call to A360 control room **bot deploy API**\
> Add a new task **Call Rest Endpoint** to the canvas and configure the
> endpoint URL and http POST method on the right-hand pane. Also update
> the request body with the correct credential.\
> \
> ![Graphical user interface, application Description automatically
> generated](./media/image14.png){width="4.350542432195976in"
> height="5.591562773403324in"}\
> \
> **Step 9 :** Add a Data Mapping task to extract the bot deployment ID
> from the previous step.\
> Extract the deployment ID, and save it to a variable\
> ![Graphical user interface, application Description automatically
> generated](./media/image15.png){width="5.5936854768153985in"
> height="0.8778969816272966in"}\
> \
> The integration looks like this:\
> ![A picture containing text Description automatically
> generated](./media/image16.png){width="2.9514643482064744in"
> height="0.5630304024496938in"}\
> ![A picture containing text, indoor Description automatically
> generated](./media/image17.png){width="2.6945833333333336in"
> height="4.548845144356956in"}
>
> **Step 10 :** To launch the above integration, create another
> integration as shown below and invoke the first integration as a
> sub-integration using the task **Call Integration**.\
> The **Call Integration** task allows you to run another integration
> (sub-integration) from your main integration. This task is useful when
> you have a dependency on another integration and want to run it from
> your main integration. The task runs the sub-integration either
> synchronously or asynchronously.

![A picture containing diagram Description automatically
generated](./media/image18.png){width="1.714630358705162in"
height="1.6154363517060368in"}

# Use Case 

-   Shopeasy is a multinational e-commerce shopping site that accepts
    customer payment methods like online payments, wire-transfers, cash
    deposits to bank, etc. from its customers. Before generating an
    invoice for the shipments, Shopeasy must ensure that the customer
    payment was processed successfully(fund transfer complete) against
    each order. Every day, an AR Analyst on Shopeasy's back office team
    logs-in to the bank portal, downloads the Bank Statement file, this
    file contains details of all the orders, payment amount and customer
    details for that day. The analyst then compares this file with
    another file that was provided by the Sales team, which contains
    customer-order details. After ensuring successful payments against
    the orders, the analyst proceeds to trigger invoicing jobs in the
    ERP system.

-   The above business process could be automated end-to-end.

-   Here's how the new automated process looks like:

    -   The bank sends the Bank Statement file via EDI

    -   The Apigee integration is configured to "listen" to incoming EDI
        files

    -   Apigee would then trigger an integration that was setup b/w
        Apigee and A360

    -   This integration would deploy an A360 bot/process that downloads
        the EDI file, processes it, and submits the invoicing jobs in
        the ERP

-   This automation takes away the repetitive tasks and allows the AR
    analyst to focus on value addition tasks like faster invoicing (CX)
    & on-time revenue recognition (UX)

# Integration Architecture

\<insert diagram - Kevin\>
